<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.code.baseservice.dao.ZfChannelDao">

    <resultMap type="com.code.baseservice.entity.ZfChannel" id="ZfChannelMap">
        <result property="channelId" column="channel_id" />
        <result property="channelName" column=" channel_name" />
        <result property="channelType" column="channel_type" />
        <result property="channelRate" column="channel_rate" />
        <result property="channelStatus" column="channel_status" />
        <result property="minAmount" column="min_amount" />
        <result property="maxAmount" column="max_amount" />
        <result property="payType" column="pay_type" />
        <result property="isThird" column="is_third" />
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="ZfChannelMap">
        select
          channel_id,  channel_name, channel_type, channel_rate, channel_status, min_amount, max_amount
        from zf_channel
        where channel_id = #{channelId}
    </select>

    <!--查询单个-->
    <select id="selectChannel" resultMap="ZfChannelMap">
        select
          channel_id, channel_name, channel_type, channel_rate, channel_status, min_amount, max_amount,pay_type,is_third
        from zf_channel
        where FIND_IN_SET(#{merchant_id}, merchant_id)
        and min_amount <![CDATA[ <= ]]> #{pay_amount}
        and max_amount <![CDATA[ >= ]]>  #{pay_amount}
        and channel_status = 1
        and channel_type = 1
    </select>

    <!--查询单个-->
    <select id="selectChannelByTrans" resultMap="ZfChannelMap">
        select
          channel_id, channel_name, channel_type, channel_rate, channel_status, min_amount, max_amount
        from zf_channel
        where FIND_IN_SET(#{merchant_id}, merchant_id)
        and min_amount <![CDATA[ <= ]]> #{pay_amount}
        and max_amount <![CDATA[ >= ]]>  #{pay_amount}
        and channel_status = 1
        and channel_type = 0
    </select>
</mapper>

